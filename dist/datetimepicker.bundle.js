!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("angular"),require("moment"),require("lodash")):"function"==typeof define&&define.amd?define(["angular","moment","lodash"],o):t.datetimepicker=o(t.angular,t.moment,t.lodash)}(this,function(t,o,n){"use strict";function e(e,i,a,l){let p={max:null,min:null,strict:!0,validate:!0};e.years=[];let u=l.$setDirty;function r(){l.$setTouched()}function m(){return p.max&&o(p.max).isValid()&&o(p.max,"Y-MM-DD",p.strict).isValid()?n.isString(p.max)?o(p.max,"Y-MM-DD",!0):o(p.max):o().endOf("y").add(200,"y")}function s(){return p.min&&o(p.min).isValid()&&o(p.min,"Y-MM-DD",p.strict).isValid()?n.isString(p.min)?o(p.min,"Y-MM-DD",!0):o(p.min):o().startOf("y").subtract(200,"y")}l.$setDirty=t.noop,function o(n){let e=(n=t.element(n)).children();for(let t=0;t<e.length;t++)o(e[t]);n.on("focus",r)}(i),t.extend(l.$validators,{invalidDate:function(t,n){if(!p.validate||!t&&!n.year&&!n.month&&!n.day)return!0;let e=o(t||n.year+"-"+n.month+"-"+n.day,"Y-MM-DD",p.strict);return e.isValid()&&e.isSameOrAfter(s())&&e.isSameOrBefore(m())},required:function(t,o){return!a.required||!!(t||o.year||o.month||o.day)}}),l.$formatters.push(t=>{if(t){let n=o(t,"Y-MM-DD");return{day:n.format("DD"),month:n.format("MM"),year:n.year()}}return{day:"",month:"",year:null}}),l.$parsers.push(t=>!p.validate||t.year&&t.month&&t.day?t.year+"-"+t.month+"-"+t.day:null),l.$render=(()=>{l.$viewValue&&(e.day=l.$viewValue.day,e.month=l.$viewValue.month,e.year=l.$viewValue.year)}),e.$watch("day + month + year",()=>{l.$setViewValue({day:e.day,month:e.month,year:e.year}),l.$setDirty=u}),e.$watch("config",()=>{p=Object.assign(p,e.config),function(){let t,o;t=s().year(),o=m().year(),e.years.splice(0);for(let n=t;n<=o;n++)e.years.push(n)}()})}t=t&&t.hasOwnProperty("default")?t.default:t,o=o&&o.hasOwnProperty("default")?o.default:o;function i(n,e,i,a){let l={strict:!0,validate:!0};n.meridian="AM";let p=a.$setDirty;function u(){a.$setTouched()}a.$setDirty=t.noop,function o(n){let e=(n=t.element(n)).children();for(let t=0;t<e.length;t++)o(e[t]);n.on("focus",u)}(e),t.extend(a.$validators,{required:function(t,o){return!i.required||!!t}}),a.$formatters.push(t=>{if(!t)return{hour:"",minute:"",meridian:"AM"};let n=o(t,"HH:mm:00",l.strict);return{hour:n.format("hh"),minute:n.format("mm"),meridian:n.format("A")}}),a.$parsers.push(t=>{if(l.validate&&(!t.hour||!t.minute))return null;let n=t.hour,e=t.minute,i=t.meridian;return o(n+":"+e+" "+i,"hh:mm A",l.strict).format("HH:mm:00")}),a.$render=(()=>{a.$viewValue&&(n.hour=a.$viewValue.hour,n.minute=a.$viewValue.minute,n.meridian=a.$viewValue.meridian)}),n.$watch("hour + minute + meridian",function(){a.$setViewValue({hour:n.hour,minute:n.minute,meridian:n.meridian}),a.$setDirty=p}),n.$watch("config",()=>{l=Object.assign(l,n.config)})}function a(e,i,a,l){const p="Y-MM-DD HH:mm:ss";let u={isUtc:!1,max:null,min:null,strict:!0};e.datepickerConfig={strict:!0,validate:!1},e.timepickerConfig={validate:!1},e.date=null,e.time=null;let r=l.$setDirty;function m(){l.$setTouched()}function s(t=null){return(t=null===t?o():n.isString(t)?o(t,p,!0):o(t)).utc()}function d(t=null){let e=[];return e=null===t?[]:n.isString(t)?[t,p,u.strict]:[t],o.utc(...e).local()}l.$setDirty=t.noop,function o(n){let e=(n=t.element(n)).children();for(let t=0;t<e.length;t++)o(e[t]);n.on("focus",m)}(i),t.extend(l.$validators,{required:function(t,o){return!a.required||!!(t||o.date||o.time)},inValidDateTime:function(t,e){if(!t&&!e.date&&!e.time)return!0;let i=t||e.date+" "+e.time;return(i=u.isUtc?s(i):o(i,p,!0)).isValid()&&i.isSameOrAfter(u.min&&o(u.min).isValid()&&o(u.min,p,u.strict).isValid()?u.isUtc?s(u.min):n.isString(u.min)?o(u.min,p,!0):o(u.min):(u.isUtc?s():o()).startOf("y").subtract(200,"y"))&&i.isSameOrBefore(u.max&&o(u.max).isValid()&&o(u.max,p,u.strict).isValid()?u.isUtc?s(u.max):n.isString(u.max)?o(u.max,p,!0):o(u.max):(u.isUtc?s():o()).endOf("y").add(200,"y"))}}),l.$formatters.push(t=>{let n,e=null,i=null;return t&&(e=(n=u.isUtc?d(t):o(t,p,!0)).format("Y-MM-DD"),i=n.format("HH:mm:00")),{date:e,time:i}}),l.$render=(()=>{l.$viewValue&&(e.date=l.$viewValue.date,e.time=l.$viewValue.time)}),l.$parsers.push(t=>{if(!t.date||!t.time)return null;let n=t.date+" "+t.time;return(n=u.isUtc?s(n):o(n,p,!0)).format("Y-MM-DD HH:mm:00")}),e.$watch("date + time",()=>{l.$setViewValue({date:e.date,time:e.time}),l.$setDirty=r}),e.$watch("config",()=>{let t=null,n=null;(u=Object.assign(u,e.config)).max&&(t=u.isUtc?d(u.max).format("Y-MM-DD"):o(u.max)),u.min&&(n=u.isUtc?d(u.min).format("Y-MM-DD"):o(u.min)),e.datepickerConfig=Object.assign({},e.datepickerConfig,u,{min:n,max:t}),e.timepickerConfig=Object.assign({},e.timepickerConfig,u)}),u=Object.assign({},u,e.config)}let l=[t.module("gridle.datepicker",[]).directive("datepicker",function(){return{require:"ngModel",restrict:"AE",scope:{ngModel:"=",config:"<?datepickerConfig"},template:'\n\t\t<div class="datepicker-select" layout="row" layout-align="start center">\n\t\t\t<select class="form-control month" name="month" ng-model="month">\n\t\t\t\t<option disabled="" label="Month" value="">Month</option>\n\t\t\t\t<option value="01">January</option>\n\t\t\t\t<option value="02">February</option>\n\t\t\t\t<option value="03">March</option>\n\t\t\t\t<option value="04">April</option>\n\t\t\t\t<option value="05">May</option>\n\t\t\t\t<option value="06">June</option>\n\t\t\t\t<option value="07">July</option>\n\t\t\t\t<option value="08">August</option>\n\t\t\t\t<option value="09">September</option>\n\t\t\t\t<option value="10">October</option>\n\t\t\t\t<option value="11">November</option>\n\t\t\t\t<option value="12">December</option>\n\t\t\t</select>\n\t\t\t<select class="form-control day" name="day" ng-model="day">\n\t\t\t\t<option disabled="" label="Day" value="">Day</option>\n\t\t\t\t<option value="01">01</option>\n\t\t\t\t<option value="02">02</option>\n\t\t\t\t<option value="03">03</option>\n\t\t\t\t<option value="04">04</option>\n\t\t\t\t<option value="05">05</option>\n\t\t\t\t<option value="06">06</option>\n\t\t\t\t<option value="07">07</option>\n\t\t\t\t<option value="08">08</option>\n\t\t\t\t<option value="09">09</option>\n\t\t\t\t<option value="10">10</option>\n\t\t\t\t<option value="11">11</option>\n\t\t\t\t<option value="12">12</option>\n\t\t\t\t<option value="13">13</option>\n\t\t\t\t<option value="14">14</option>\n\t\t\t\t<option value="15">15</option>\n\t\t\t\t<option value="16">16</option>\n\t\t\t\t<option value="17">17</option>\n\t\t\t\t<option value="18">18</option>\n\t\t\t\t<option value="19">19</option>\n\t\t\t\t<option value="20">20</option>\n\t\t\t\t<option value="21">21</option>\n\t\t\t\t<option value="22">22</option>\n\t\t\t\t<option value="23">23</option>\n\t\t\t\t<option value="24">24</option>\n\t\t\t\t<option value="25">25</option>\n\t\t\t\t<option value="26">26</option>\n\t\t\t\t<option value="27">27</option>\n\t\t\t\t<option value="28">28</option>\n\t\t\t\t<option value="29">29</option>\n\t\t\t\t<option value="30">30</option>\n\t\t\t\t<option value="31">31</option>\n\t\t\t</select>\n\t\t\t<select class="form-control year" ng-options="year as year for year in years" name="year" ng-model="year">\n\t\t\t\t<option disabled="" label="Year" value="">Year</option>\n\t\t\t</select>\n\t\t</div>',link:e}}).name,t.module("gridle.timepicker",[]).directive("timepicker",function(){return{require:"ngModel",restrict:"AE",scope:{ngModel:"=",config:"<?timepickerConfig"},template:'\n\t\t<div class="timepicker-select" layout="row" layout-align="start center">\n\t\t<select class="form-control day" name="HH" ng-model="hour">\n\t\t\t<option selected="" disabled="" label="HH" value="">HH</option>\n\t\t\t<option value="01">01</option>\n\t\t\t<option value="02">02</option>\n\t\t\t<option value="03">03</option>\n\t\t\t<option value="04">04</option>\n\t\t\t<option value="05">05</option>\n\t\t\t<option value="06">06</option>\n\t\t\t<option value="07">07</option>\n\t\t\t<option value="08">08</option>\n\t\t\t<option value="09">09</option>\n\t\t\t<option value="10">10</option>\n\t\t\t<option value="11">11</option>\n\t\t\t<option value="12">12</option>\n\t\t</select>\n\n\t\t<select class="form-control day" name="MM" ng-model="minute">\n\t\t\t<option selected="" disabled="" label="MM" value="">MM</option>\n\t\t\t\t<option value="00">00</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option><option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="38">38</option><option value="39">39</option><option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option><option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option><option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option><option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option>\n\t\t\t</select>\n\n\t\t\t<select class="form-control day" name="meridian" ng-model="meridian">\n\t\t\t\t<option selected="" label="AM" value="AM">AM</option>\n\t\t\t\t<option value="PM">PM</option>\n\t\t\t</select>\n\t</div>\n\t\t',link:i}}).name];return t.module("gridle.datetimepicker",l).directive("datetimepicker",function(){return{require:"ngModel",restrict:"AE",scope:{config:"<?datetimePickerConfig",ngModel:"="},template:'\n\t\t\t<div\n\t\t\t\tclass="date"\n\t\t\t\tdatepicker=""\n\t\t\t\tdatepicker-config="datepickerConfig"\n\t\t\t\tname="date"\n\t\t\t\tng-model="date">\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass="time"\n\t\t\t\ttimepicker=""\n\t\t\t\ttimepicker-config="timepickerConfig"\n\t\t\t\tname="time"\n\t\t\t\tng-model="time">\n\t\t\t</div>\n\t\t',link:a}}).name});
//# sourceMappingURL=datetimepicker.bundle.js.map
